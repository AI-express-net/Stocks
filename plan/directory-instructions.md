# Plan Directory Hierarchy and Instructions

## Overview

The 'plan' directories are hierarchically structured to provide organized documentation, requirements, and progress tracking across the project. This document explains the structure and inheritance rules.

## Directory Structure

```
Stocks/ (root project)
├── plan/ (root level plan)
│   ├── instructions.md (general instructions)
│   ├── coding_rules.md (general coding rules)
│   ├── directory-instructions.md (this file)
│   └── progress/ (Cursor-generated files)
└── back_tester/ (subproject)
    └── plan/ (subproject-specific plan)
        ├── requirements.md (back_tester specific requirements)
        └── progress/ (Cursor-generated files for back_tester)
```

## Hierarchical Inheritance Rules

### **Key Principle:**
Any instructions, rules, or requirements in the plan directory of a project or subject also applies to subdirectories, subprojects, and submodules of the parent directory of the 'plan' directory.

### **Inheritance Flow:**
1. **Root level plan** (`plan/`) contains general instructions and coding rules that apply to the entire project
2. **Subproject plan** (`back_tester/plan/`) contains specific requirements for the back_tester subproject
3. **Combined application**: When working on any subproject, all applicable rules and requirements must be followed

## File Purposes

### Root Level Plan (`plan/`)
- **instructions.md**: General instructions for the entire project
- **coding_rules.md**: General coding rules that apply to all code
- **directory-instructions.md**: This file - explains the hierarchy structure
- **progress/**: Contains Cursor-generated files for the overall project

### Subproject Plan (`back_tester/plan/`)
- **requirements.md**: Specific requirements for the back_tester module
- **progress/**: Contains Cursor-generated files specific to back_tester

## Application Guidelines

### When Working on Back_Tester:
1. **Follow general coding rules** from `plan/coding_rules.md`
2. **Follow general instructions** from `plan/instructions.md`
3. **Follow specific requirements** from `back_tester/plan/requirements.md`
4. **All new code** goes in the `back_tester/` folder
5. **All requirements** must be reflected in pytest unit tests
6. **All code** must work in both PyCharm and Cursor

### General Rules:
- Read all files called `requirements.md` in the project
- Check all modules for multiple requirement files
- Run pytest after any code changes
- Never suggest using mocks in production code
- All applications and tests must run in both PyCharm and Cursor
- Ensure new packages introduced in Cursor are available in PyCharm

## Progress Tracking

Each plan directory has its own `progress/` subdirectory for:
- Files generated by Cursor/IDE
- Temporary documentation
- Work-in-progress files
- Files that should not be tracked by version control

## Verification Process

When asked to 'verify plan':
1. Check if the code matches all requirements in applicable plan files
2. Show planned changes if updates are needed
3. Write verification results in timestamped files
4. Write complete plan with all phases in timestamped files
5. Ensure all hierarchical requirements are satisfied

## Benefits

This hierarchical structure ensures:
- **Consistency** across the project
- **Modularity** for specific requirements
- **Inheritance** of general rules to all subprojects
- **Organized progress tracking** at each level
- **Clear separation** of concerns between general and specific requirements
